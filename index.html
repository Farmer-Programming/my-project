<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>统计系统</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ==================== 基础重置与字体控制 ==================== */
    body {
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff;
      color: #333333;
      font-size: 13px;
    }

    /* 杜绝宋体、Times 等 */
    * {
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
    }

    /* ==================== 图表容器 ==================== */
    .chart-container {
      height: 100px;
      width: 100%;
      overflow: hidden;
      padding: 5px;
      box-sizing: border-box;
    }

    /* ==================== 统计区：数据网格 ==================== */
    .data-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(8, auto);
      grid-auto-flow: column;
      gap: 0;
      font-size: 12px;
      padding: 3px 6px;
      position: relative;
      background: white;
      box-sizing: border-box;
      background-image: linear-gradient(to right,
          transparent calc(25% - 0.5px), #e0e0e0 1px, transparent calc(25% + 0.5px),
          transparent calc(50% - 0.5px), #e0e0e0 1px, transparent calc(50% + 0.5px),
          transparent calc(75% - 0.5px), #e0e0e0 1px, transparent calc(75% + 0.5px)
      );
      background-size: 100% 100%;
        /* ✅ 关键：靠右对齐 */
  margin-left: auto;
  margin-right: 0;

  /* 可选：限制最大宽度，避免过大 */
  max-width: 800px;
  width: 97%;


    }

    .data-grid > div {
      padding: 3px 6px;
      line-height: 1.2;
      position: relative;
    }

    .data-grid input {
      font-size: 13px;
      padding: 3px 6px;
      border: none;
      background: transparent;
      width: 100%;
      box-sizing: border-box;
      line-height: 1.2;
    }

    .data-grid > div:nth-child(4n+1)::before,
    .data-grid > div:nth-child(4n+2)::before,
    .data-grid > div:nth-child(4n+3)::before {
      content: "";
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 1px;
      background-color: #ccc;
    }

    /* ==================== 按钮区 ==================== */
    .button-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
      padding: 10px;
      font-size: 13px;
      box-sizing: border-box;
    }

    .button-grid button {
      height: 30px;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif;
      font-size: 13px;
      border: 1px solid #000;
      background-color: #eeeeee;
      cursor: pointer;
    }

    /* ==================== 账本表格 ==================== */
    .ledger {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
      table-layout: fixed;
    }

    .ledger th,
    .ledger td {
      padding: 4px 6px;
      border-bottom: 1px solid #eee;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
    }

    .ledger th {
      text-align: center;
      font-weight: normal;
    }

    .ledger td {
      text-align: right;
    }

    /* ==================== 列宽与列字体（已修正第2/3列避免等宽回退到宋体） ==================== */
    .ledger th:nth-child(1),
    .ledger td:nth-child(1) {
      width: 9%;
      text-align: right !important;
      padding-left: 8px;
    }

    /* 第2列：盈亏（用无衬线中文友好字体，数字等宽） */
    .ledger th:nth-child(2),
    .ledger td:nth-child(2) {
      width: 16%;
      text-align: right !important;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
      font-size: 12px;
      font-variant-numeric: tabular-nums;
      font-feature-settings: 'tnum' 1, 'lnum' 1;
    }

    /* 第3列：下注（同上） */
    .ledger th:nth-child(3),
    .ledger td:nth-child(3) {
      width: 13%;
      text-align: right !important;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
      font-size: 12px;
      font-variant-numeric: tabular-nums;
      font-feature-settings: 'tnum' 1, 'lnum' 1;
    }

    /* 第4列：红绿状态图标（避免 monospace 引起中文回退） */
    .ledger th:nth-child(4),
    .ledger td:nth-child(4) {
      width: 12%;
      text-align: center !important;
      font-family: 'Arial', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
      font-size: 12px;
      padding: 4px;
      vertical-align: middle;
      line-height: 1.2;
    }

    /* 第5列：备注/日志 */
    .ledger th:nth-child(5),
    .ledger td:nth-child(5) {
      width: 50%;
      text-align: left !important;
      padding: 4px 8px;
      font-size: 12px;
      color: #333;
      word-break: break-word;
      white-space: normal;
      line-height: 1.3;
      font-family: 'Microsoft YaHei', 'Arial', 'PingFang SC', 'Hiragino Sans GB',
                   'Noto Sans CJK SC', 'SimHei', 'Helvetica Neue', Helvetica, sans-serif !important;
    }

    /* ==================== 特殊行样式 ==================== */

    /* 斑马线（按需要可保留/调整） */
    .ledger tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .round-start-row {
      background-color: #ffeeba !important;
      border-top: 2px solid #f0ad4e !important;
    }

    .temporary-range {
      background-color: #d1ecf1 !important;
      opacity: 0.8;
    }

    .ledger tbody tr.frozen-row td {
      position: sticky;
      top: 0;
      background: white;
      height: 1px;
      font-size: 0;
      padding: 0;
      border: none;
      z-index: 2;
    }

    .ledger td[contenteditable="true"] {
      outline: none;
      min-height: 1.2em;
      background-color: #f9f9f9;
      cursor: text;
    }

    .ledger-container {
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>
<body>

<div class="chart-container">
  <canvas id="trendChart"></canvas>
</div>

<div class="data-grid">
  <input id="input1" type="text" placeholder="注入本金"> 
  <input id="input2" type="text" placeholder="初始注码"> 
  <input id="input3" type="text" placeholder="最低注码"> 
  <input id="input4" type="text" placeholder="加减单位"> 
  <input id="input5" type="text" placeholder="期望盈利">
  <input id="input6" type="text" placeholder="下注方向">
  <input id="input7" type="text" placeholder="下注注码"> 
  <input id="input8" type="text" placeholder="加到1.06%">
  <input id="stat-total-hands" type="text" placeholder="总体手数" readonly>
  <input id="stat-win-hands" type="text" placeholder="总体胜手" readonly> 
  <input id="stat-net-win" type="text" placeholder="总体净胜" readonly> 
  <input id="stat-win-rate" type="text" placeholder="总体胜率" readonly> 
  <input id="stat-total-profit" type="text" placeholder="总体盈利" readonly> 
  <input id="stat-average-win" type="text" placeholder="总体平均赢" readonly>
  <input id="stat-goal-complete" type="text" placeholder="完成总体期望" readonly> 
  <input id="stat-round-hole" type="text" placeholder="总体码洞" readonly>
  <input id="round-total-hands" type="text" placeholder="回合手数" readonly>
  <input id="round-win-hands" type="text" placeholder="回合胜手" readonly> 
  <input id="round-net-win" type="text" placeholder="回合净胜" readonly>
  <input id="round-win-rate" type="text" placeholder="回合胜率" readonly>
  <input id="round-total-profit" type="text" placeholder="回合盈利" readonly>
  <input id="round-average-win" type="text" placeholder="回合平均赢" readonly>
  <input id="round-goal-complete" type="text" placeholder="完成回合期望" readonly>
  <input id="round-hole" type="text" placeholder="回合码洞" readonly>
  <input id="sys-flow-total" type="text" placeholder="流水总额" readonly>
  <input id="sys-current-fund" type="text" placeholder="当前资金" readonly>
  <input id="sys-max-loss-capital" type="text" placeholder="最大消耗本金" readonly>
  <input id="sys-average-win" type="text" placeholder="单手均利" readonly>
  <input id="sys-max-netwin" type="text" placeholder="最大净胜" readonly>
  <input id="sys-min-netwin" type="text" placeholder="最小净胜" readonly>
  <input id="sys-total-forecast" type="text" placeholder="总体预知" readonly>
  <input id="sys-round-forecast" type="text" placeholder="回合预知" readonly>
</div>

<div class="button-grid">
  <button id="deleteData">删除数据</button>
  <button id="recordHistory">记录历史</button>
  <button id="toggleMode">整体/回合</button>
  <button id="recordRewrite">记录重写</button>
  <button id="resetFlow">重置流水</button>
  <button id="restartSystem">重启系统</button>
  <button id="temporaryView">临时查看</button>
  <button id="randomDirection">随机方向</button>
  <button id="winB">WINB</button>
  <button id="winP">WINP</button>
  <button id="losB">LOSB</button>
  <button id="losP">LOSP</button>
</div>

<div class="ledger-container">
  <table class="ledger">
    <tbody>
      <tr class="frozen-row"><td colspan="5"></td></tr>
    </tbody>
  </table>
</div>

<script src="script.js"></script>
</body>
</html>
```